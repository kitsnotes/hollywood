# Contributor: The Cat <cat@originull.org>
# Maintainer: The Cat <cat@originull.org>
pkgname=hollywood-qt6-libs
pkgver=1.0
pkgrel=31
pkgdesc="Hollywood Qt6 Support Integration Libraries"
url="https://originull.org"
arch="all"
options="!check" # no test suite
license="LGPL2"
depends="qt6-qtbase qt6-qtwayland libdrm libinput"
makedepends="qt6-qtwayland-dev elogind-dev eudev-dev libdrm-dev libinput-dev"
# subpackages="$pkgname-dev"
source="https://depot.originull.org/upstream/hollywood-desktop-$pkgver.tar.gz"
builddir="$srcdir/hollywood-desktop-$pkgver"

build() {
	cd $builddir/libcompositor
	/usr/lib/qt6/bin/qmake
	make

        cd $builddir/libcommdlg
        /usr/lib/qt6/bin/qmake
        make

        cd $builddir/platformtheme
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/platformplugin
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/style
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/shellintegration
        /usr/lib/qt6/bin/qmake
        make
	
	cd $builddir/libhwlogind
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/libhwudev
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/libcmctl
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/eglfs/platformheaders
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/eglfs/libinput
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/eglfs/eglfsxkb
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/eglfs/platformsupport/edid
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/eglfs/platformsupport/kmsconvenience
        /usr/lib/qt6/bin/qmake
        make
}

package() {
	cd $builddir/libcompositor
	make INSTALL_ROOT="$pkgdir" install

        cd $builddir/libcommdlg
        make INSTALL_ROOT="$pkgdir" install

        cd $builddir/platformtheme
        make INSTALL_ROOT="$pkgdir" install

        cd $builddir/platformplugin
        make INSTALL_ROOT="$pkgdir" install

        cd $builddir/style
        make INSTALL_ROOT="$pkgdir" install

	cd $builddir/shellintegration
        make INSTALL_ROOT="$pkgdir" install

	cd $builddir/libhwlogind
        make INSTALL_ROOT="$pkgdir" install

	cd $builddir/libhwudev
        make INSTALL_ROOT="$pkgdir" install

	cd $builddir/libcmctl
        make INSTALL_ROOT="$pkgdir" install

	cd $builddir/libcmctl
        make INSTALL_ROOT="$pkgdir" install

        cd $builddir/eglfs/platformsupport/kmsconvenience
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/eglfs/platformsupport/edid
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/eglfs/platformheaders
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/eglfs/libinput
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/eglfs/eglfsxkb
        make INSTALL_ROOT="$pkgdir" install
}

sha512sums="
6cd768248ffe0a8d7ba37929df674b83aab6900286f21edde11e48f42f1f39467acd78009f1803dd0a4c91c25dca08ed119e059e32f4ad8e1060cb0802173ee8  hollywood-desktop-1.0.tar.gz
"
