# Contributor: The Cat <cat@originull.org>
# Maintainer: The Cat <cat@originull.org>
pkgname=hollywood-settings
pkgver=1.0
pkgrel=21
pkgdesc="Hollywood System Settings"
url="https://originull.org"
arch="all"
options="!check" # no test suite
license="GPL2"
depends="qt6-qtbase qt6-qtwayland hollywood-qt6-libs hollywood-shell mdnsresponder qt6-polkit-qt-1 efivar efibootmgr qt6-qt5compat libapk-qt"
makedepends="qt6-qtwayland-dev qt6-polkit-qt-1-dev efivar-dev libapk-qt-dev qt6-qt5compat-dev libapk-qt-dev qt6-qtsvg-dev"
source="https://depot.originull.org/upstream/hollywood-desktop-$pkgver.tar.gz"
builddir="$srcdir/hollywood-desktop-$pkgver"

build() {
	cd $builddir/settings
	/usr/lib/qt6/bin/qmake
	make

        cd $builddir/settings/applet-datetime
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/settings/applet-apk
        /usr/lib/qt6/bin/qmake INCLUDEPATH+=/usr/include/ApkQt/
        make

	cd $builddir/settings/applet-region
        /usr/lib/qt6/bin/qmake
        make

#	cd $builddir/settings/applet-efiboot
#        /usr/lib/qt6/bin/qmake
#        make

        cd $builddir/settings/applet-general
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/settings/applet-wallpaper
	/usr/lib/qt6/bin/qmake
	make

	cd $builddir/settings/applet-keyboard
        /usr/lib/qt6/bin/qmake
        make

        cd $builddir/settings/applet-mouse
        /usr/lib/qt6/bin/qmake
        make
}

package() {
	cd $builddir/settings
	make INSTALL_ROOT="$pkgdir" install

        cd $builddir/settings/applet-datetime
        make INSTALL_ROOT="$pkgdir" install
	cd $builddir/settings/applet-apk
        make INSTALL_ROOT="$pkgdir" install
	cd $builddir/settings/applet-region
        make INSTALL_ROOT="$pkgdir" install
#	cd $builddir/settings/applet-efiboot
#        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/settings/applet-general
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/settings/applet-keyboard
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/settings/applet-mouse
        make INSTALL_ROOT="$pkgdir" install
	cd $builddir/settings/applet-wallpaper
	make INSTALL_ROOT="$pkgdir" install	
}

sha512sums="
29e6fc401e0a58f968436f484e9d6acb48d896e9a7093c942c38dbdefa70e4974220d404d194804487ff19746f86d344c86fa4478328fefed82c4de3057f2420  hollywood-desktop-1.0.tar.gz
"
