# Contributor: The Cat <cat@originull.org>
# Maintainer: The Cat <cat@originull.org>
pkgname=hollywood-settings
pkgver=1.0
pkgrel=29
pkgdesc="Hollywood System Settings"
url="https://originull.org"
arch="all"
options="!check" # no test suite
license="GPL2"
depends="qt6-qtbase qt6-qtwayland hollywood-qt6-libs hollywood-shell mdnsresponder qt6-polkit-qt-1 efivar efibootmgr qt6-qt5compat libapk-qt"
makedepends="qt6-qtwayland-dev qt6-polkit-qt-1-dev efivar-dev libapk-qt-dev qt6-qt5compat-dev libapk-qt-dev qt6-qtsvg-dev"
source="https://depot.originull.org/upstream/hollywood-desktop-$pkgver.tar.gz"
builddir="$srcdir/hollywood-desktop-$pkgver"

build() {
	cd $builddir/settings
	/usr/lib/qt6/bin/qmake
	make

        cd $builddir/settings/helper-datetime
        /usr/lib/qt6/bin/qmake
        make

        cd $builddir/settings/applet-datetime
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/settings/applet-displays
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/settings/applet-energy
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/settings/applet-apk
        /usr/lib/qt6/bin/qmake INCLUDEPATH+=/usr/include/ApkQt/
        make

        cd $builddir/settings/applet-stage
        /usr/lib/qt6/bin/qmake
        make

        cd $builddir/settings/applet-network
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/settings/applet-region
        /usr/lib/qt6/bin/qmake
        make

#	cd $builddir/settings/applet-efiboot
#        /usr/lib/qt6/bin/qmake
#        make

        cd $builddir/settings/applet-general
        /usr/lib/qt6/bin/qmake
        make

	cd $builddir/settings/applet-wallpaper
	/usr/lib/qt6/bin/qmake
	make

	cd $builddir/settings/applet-keyboard
        /usr/lib/qt6/bin/qmake
        make

        cd $builddir/settings/applet-mouse
        /usr/lib/qt6/bin/qmake
        make
}

package() {
	cd $builddir/settings
	make INSTALL_ROOT="$pkgdir" install

	cd $builddir/settings/helper-datetime
        make INSTALL_ROOT="$pkgdir" install

        cd $builddir/settings/applet-datetime
        make INSTALL_ROOT="$pkgdir" install
	cd $builddir/settings/applet-apk
        make INSTALL_ROOT="$pkgdir" install
	cd $builddir/settings/applet-region
        make INSTALL_ROOT="$pkgdir" install

        cd $builddir/settings/applet-displays
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/settings/applet-energy
        make INSTALL_ROOT="$pkgdir" install

        cd $builddir/settings/applet-stage
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/settings/applet-network
        make INSTALL_ROOT="$pkgdir" install

#	cd $builddir/settings/applet-efiboot
#        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/settings/applet-general
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/settings/applet-keyboard
        make INSTALL_ROOT="$pkgdir" install
        cd $builddir/settings/applet-mouse
        make INSTALL_ROOT="$pkgdir" install
	cd $builddir/settings/applet-wallpaper
	make INSTALL_ROOT="$pkgdir" install	
}

sha512sums="
6cd768248ffe0a8d7ba37929df674b83aab6900286f21edde11e48f42f1f39467acd78009f1803dd0a4c91c25dca08ed119e059e32f4ad8e1060cb0802173ee8  hollywood-desktop-1.0.tar.gz
"
